<% layout("/layouts/boilerplate.ejs") %>
<body>
    <div class="home-flex">
        <h1>All Listings</h1>
        <div class="btn-group">
            <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Sort By
            </button>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/listings?sort=default">Default</a>
                <a class="dropdown-item" href="/listings?sort=alpha">Alphabetical</a>
                <a class="dropdown-item" href="/listings?sort=stLow">Price(low to high)</a>
                <a class="dropdown-item" href="/listings?sort=stHigh">Price(high to low)</a>
            </div>
        </div>
    </div>
    <% if(user?.type === "managers" && result.length == 0){ %>
        <h4>No listings under your management</h4>
    <% } %>
    <div id="listing-container">
    <% for(data of result){ %>
        <a href="/listings/<%= data.id %>" style="text-decoration: none">
        <div class="card">
            <img src="<%= data.image %>" class="card-img-top" alt="listing_image">
            <div class="card-body">
                <p class="card-text">
                <b><%= data.title %></b> <br>
                &#8377;<%= data.price.toLocaleString("en-IN") %> / day
                </p>
            </div>
        </div>
        </a>
    <% } %>
    </div>
</body>
